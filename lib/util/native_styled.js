var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:true});exports.default=rnStyled;var _taggedTemplateLiteralLoose2=_interopRequireDefault(require("@babel/runtime/helpers/taggedTemplateLiteralLoose"));var _objectSpread2=_interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));var _slicedToArray2=_interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));var _lodash=_interopRequireDefault(require("lodash"));var _native=_interopRequireDefault(require("styled-components/native"));function _templateObject(){var data=(0,_taggedTemplateLiteralLoose2.default)(["",""]);_templateObject=function _templateObject(){return data;};return data;}var EXTRACT_RULESETS=/(?:[#.](\w+)|(\[\w+\])) \{([^}]+)\}/gm;var EXTRACT_ATTR_NAME=/^\[(\w+)\]$/;var EXTRACT_COMMENTS=/\/\*[^(*/)]*\*\//gm;var EXTRACT_KEY_VALUE_PAIRS=/\b([\w-]+): ([^;]+);/gm;var SPLIT_HERE=/\/\* SPLIT HERE: DO NOT DELETE \*\//;function parse(css){return function(props){var styles={};var attrs={};css.map(function(chunk){return typeof chunk==="function"?chunk(props):chunk;}).join("").replace(EXTRACT_COMMENTS,"").replace(EXTRACT_RULESETS,function(_1,name,attr,rules){var target={};var attrName;if(attr){var _attr$match=attr.match(EXTRACT_ATTR_NAME);var _attr$match2=(0,_slicedToArray2.default)(_attr$match,2);attrName=_attr$match2[1];attrs[attrName]=target;}else{styles[name]=target;}rules.replace(EXTRACT_KEY_VALUE_PAIRS,function(_2,key,value){target[_lodash.default.camelCase(key)]=isNaN(value)?value:parseFloat(value,10);});if(attrName==="props"){_lodash.default.extend(attrs,target);delete attrs.props;}});return(0,_objectSpread2.default)({styles:styles},attrs);};}function rnStyled(Component,css){var base=[];var nested=[];var current=base;css.forEach(function(chunk){if(SPLIT_HERE.test(chunk)){var _chunk$split=chunk.split(SPLIT_HERE),_chunk$split2=(0,_slicedToArray2.default)(_chunk$split,2),before=_chunk$split2[0],after=_chunk$split2[1];base.push(before);nested.push(after);current=nested;}else{current.push(chunk);}});return(0,_native.default)(Component).attrs(parse(nested))(_templateObject(),base);}